{"version":3,"sources":["webpack:///./src/views/ForgetPassword.vue?bfdd","webpack:///src/views/ForgetPassword.vue","webpack:///./src/views/ForgetPassword.vue?c57c","webpack:///./src/views/ForgetPassword.vue","webpack:///./src/views/ForgetPassword.vue?c873"],"names":["render","_vm","this","_h","$createElement","_c","_self","class","isPc","isSent","_e","staticClass","_v","attrs","form","on","handleSubmit","emailState","directives","name","rawName","value","rules","type","message","required","expression","$event","showError","iconLoading","style","_s","errorMss","backgroundImage","$assetsUrl","loading","resendTip","resendEmail","staticStyle","secondNum","staticRenderFns","component"],"mappings":"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","file":"js/chunk-30c022db.13c0fd1f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{'forget-password-container': _vm.isPc, 'forget-password-container-mb': !_vm.isPc}},[(!_vm.isSent)?_c('div',{staticClass:\"send-email-container\"},[_c('p',{staticClass:\"title\"},[_vm._v(\"忘記密碼\")]),_c('p',{staticClass:\"description\"},[_vm._v(\"用電郵重置賬戶密碼\")]),_c('a-form',{staticClass:\"forget-password-form\",attrs:{\"id\":\"components-form-demo-normal-login\",\"form\":_vm.form},on:{\"submit\":_vm.handleSubmit}},[_c('a-form-item',[_c('i',{staticClass:\"input-icon\",class:{\n      'email-icon-normal': _vm.emailState === 1,\n      'email-icon-click': _vm.emailState === 2,\n      'email-icon-error': _vm.emailState === 3}}),_c('a-input',{directives:[{name:\"decorator\",rawName:\"v-decorator\",value:(['email',{ rules: [{\n              type: 'email',\n              message: '郵箱格式錯誤',\n            },{ required: true, message: '請輸入電郵' }] }]),expression:\"['email',{ rules: [{\\n              type: 'email',\\n              message: '郵箱格式錯誤',\\n            },{ required: true, message: '請輸入電郵' }] }]\"}],attrs:{\"placeholder\":\"電郵\"},on:{\"focus\":function($event){_vm.emailState = 2;_vm.showError = 0}}})],1),_c('a-form-item',[_c('a-button',{staticClass:\"forget-password-form-button\",attrs:{\"type\":\"primary\",\"html-type\":\"submit\",\"loading\":_vm.iconLoading}},[_vm._v(\"重設密碼\\n        \")]),_c('p',{staticClass:\"error-mss\",style:({'opacity':_vm.showError})},[_vm._v(_vm._s(_vm.errorMss))])],1)],1)],1):_vm._e(),(_vm.isSent)?_c('div',{staticClass:\"sent-container\"},[_c('p',{staticClass:\"title\"},[_vm._v(\"驗證郵件已發送\")]),_c('p',{staticClass:\"description\"},[_vm._v(\"請檢查電郵收件箱。\")]),_c('i',{staticClass:\"sent-icon\",style:({backgroundImage: 'url(' + _vm.$assetsUrl + 'user/email-sent.svg)'})}),_c('p',{staticClass:\"footer-tip\"},[_vm._v(\"找不到電郵？請查看垃圾箱或\\n      \"),(_vm.loading)?_c('a-button',{attrs:{\"type\":\"link\",\"loading\":_vm.loading}}):_vm._e(),(!_vm.loading && !_vm.resendTip)?_c('span',{on:{\"click\":function($event){return _vm.resendEmail()}}},[_vm._v(\"重發。\")]):_vm._e(),(_vm.resendTip)?_c('span',{staticStyle:{\"color\":\"#768392\"}},[_vm._v(\"已發送(\"+_vm._s(_vm.secondNum)+\")\")]):_vm._e()],1)]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :class=\"{'forget-password-container': isPc, 'forget-password-container-mb': !isPc}\">\n    <div v-if=\"!isSent\" class=\"send-email-container\">\n      <p class=\"title\">忘記密碼</p>\n      <p class=\"description\">用電郵重置賬戶密碼</p>\n      <a-form id=\"components-form-demo-normal-login\" :form=\"form\" class=\"forget-password-form\" @submit=\"handleSubmit\">\n        <a-form-item>\n          <i class=\"input-icon\" :class=\"{\n        'email-icon-normal': emailState === 1,\n        'email-icon-click': emailState === 2,\n        'email-icon-error': emailState === 3}\"></i>\n          <a-input v-decorator=\"['email',{ rules: [{\n                type: 'email',\n                message: '郵箱格式錯誤',\n              },{ required: true, message: '請輸入電郵' }] }]\"\n                   placeholder=\"電郵\" @focus=\"emailState = 2;showError = 0\" >\n          </a-input>\n        </a-form-item>\n        <a-form-item>\n          <a-button type=\"primary\" html-type=\"submit\" :loading=\"iconLoading\" class=\"forget-password-form-button\">重設密碼\n          </a-button>\n          <p class=\"error-mss\" :style=\"{'opacity':showError}\">{{errorMss}}</p>\n        </a-form-item>\n      </a-form>\n    </div>\n    <div v-if=\"isSent\" class=\"sent-container\">\n      <p class=\"title\">驗證郵件已發送</p>\n      <p class=\"description\">請檢查電郵收件箱。</p>\n      <i class=\"sent-icon\" :style=\"{backgroundImage: 'url(' + $assetsUrl + 'user/email-sent.svg)'}\"></i>\n      <p class=\"footer-tip\">找不到電郵？請查看垃圾箱或\n        <a-button v-if=\"loading\" type=\"link\" :loading=\"loading\"></a-button>\n        <span v-if=\"!loading && !resendTip\" @click=\"resendEmail()\">重發。</span>\n        <span v-if=\"resendTip\" style=\"color: #768392\">已發送({{secondNum}})</span>\n      </p>\n    </div>\n  </div>\n\n</template>\n\n<script>\n\n  import { LOCALE_KEY } from '../i18n';\n\n  export default {\n    beforeCreate() {\n      this.form = this.$form.createForm(this);\n    },\n    data() {\n      return {\n        emailState: 1,\n        errorMss: '',\n        noAccountSignUp: '現在註冊',\n        showError: 0,\n        iconLoading: false,\n        isSent: false,\n        emailReg: /[\\w!#$%&'*+/=?^_`{|}~-]+(?:\\.[\\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\\w](?:[\\w-]*[\\w])?\\.)+[\\w](?:[\\w-]*[\\w])?/,\n        loading: false,\n        resendTip: false,\n        secondNum: 60,\n        dataBuf: {},\n        isPc: this.$isPc()\n    }\n\n    },\n    methods: {\n      handleSubmit(e) {\n        e.preventDefault();\n        this.form.validateFields((err, values) => {\n          if (!err) {\n            this.iconLoading = true;\n            values['redirectTo'] = `${window.location.origin}/${window.localStorage.getItem(LOCALE_KEY)}/users/reset-password`\n            this.dataBuf = values\n            this.sendForgetEmail(values)\n          }\n        });\n      },\n      resendEmail() {\n        this.loading = true;\n        this.sendForgetEmail(this.dataBuf)\n      },\n      sendForgetEmail(values) {\n        this.$http.post(`${process.env.VUE_APP_SERVER_URL}/api/v2/users/resetpassword`, values)\n          .then((data) => {\n            if (this.loading) {\n              this.loading = false;\n              this.resendTip = true;\n              let test = setInterval(() => {\n                this.secondNum--;\n                if (this.secondNum === 0) {\n                  window.clearInterval(test);\n                  this.resendTip = false;\n                  this.secondNum = 60;\n                }\n              }, 1000);\n            }\n            this.iconLoading = false;\n            if (data.status === 201 || data.status === 200) {\n              this.isSent = true\n            } else {\n              this.emailState = 3;\n              this.showError = 1;\n              // if (data.message.indexOf('We do not have this email registered') > -1) {\n                this.errorMss = '此郵箱未註冊';\n                this.noAccountSignUp = '';\n              // }\n            }\n          });\n      }\n    },\n  };\n</script>\n<style lang=\"scss\">\n  .forget-password-container {\n    width: 420px;\n    .send-email-container {\n      display: flex;\n      flex-direction: column;\n      .title {\n        font-size: 36px;\n        font-weight: 600;\n        margin-bottom: 12px;\n      }\n      .description {\n        margin-bottom: 60px;\n        font-size: 16px;\n        font-weight: 400;\n        line-height: 22px;\n        color: #616577\n      }\n      .ant-form-item {\n        .ant-input {\n          width: 100%;\n          height: 52px;\n          padding: 0 36px 0 53px;\n        }\n        .input-icon {\n          position: absolute;\n          width: 20px;\n          height: 20px;\n          top: -1px;\n          left: 19px;\n          z-index: 1;\n        }\n        .email-icon-normal {\n          background: url(\"../assets/user/email-normal.svg\") no-repeat;\n          background-size: 100% 100%;\n        }\n        .email-icon-click {\n          background: url(\"../assets/user/email-click.svg\") no-repeat;\n          background-size: 100% 100%;\n        }\n        .email-icon-error {\n          background: url(\"../assets/user/email-error.svg\") no-repeat;\n          background-size: 100% 100%;\n        }\n      }\n      .ant-form-explain {\n        margin-top: 8px;\n        display: flex;\n        align-items: center;\n        &::before {\n          margin: 0 6px 0 0;\n          background: url('../assets/user/error-tip-icon.svg') no-repeat center;\n          background-size: auto;\n          content: \"\";\n          display: inline-block;\n          width: 14px;\n          height: 14px;\n        }\n      }\n      .ant-form-item:nth-of-type(2) {\n        margin-top: 40px;\n        .ant-form-item-children {\n          display: flex;\n          flex-direction: column;\n          .forget-password-form-button {\n            font-size: 18px;\n            height: 52px;\n            font-weight: 600;\n            margin-bottom: 8px;\n            background-color: #3963EF;\n            border-color: #3963EF;\n            box-shadow: 0 3px 6px rgba(86, 109, 186, 0.3);\n            &:hover {\n              box-shadow: 0 6px 14px rgba(86, 109, 186, 0.3);\n            }\n            &:active {\n              background-color: #3257D2;\n              border-color: #3257D2;\n              box-shadow: 0 6px 14px rgba(86, 109, 186, 0.3);\n            }\n          }\n          .error-mss {\n            opacity: 0;\n            font-size: 14px;\n            line-height: 16px;\n            font-weight: 400;\n            display: flex;\n            flex-direction: row;\n            align-items: center;\n            height: 38px;\n            color: #FC6174;\n            border: 1px solid #FC6174;\n            border-radius: 4px;\n            background-color: #FFF5F6;\n            margin-bottom: 14px;\n            &::before {\n              margin: 0 6px 0 12px;\n              background: url('../assets/user/error-tip-icon.svg') no-repeat center;\n              background-size: auto;\n              content: \"\";\n              width: 14px;\n              display: inline-block;\n              height: 14px;\n            }\n          }\n        }\n      }\n    }\n    .sent-container {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      .title {\n        font-size: 36px;\n        font-weight: 600;\n        margin-bottom: 12px;\n      }\n      .description {\n        margin-bottom: 68px;\n        font-size: 16px;\n        font-weight: 400;\n        line-height: 22px;\n        color: #616577\n      }\n      .sent-icon {\n        width: 108px;\n        display: inline-block;\n        height: 101px;\n        margin-bottom: 66.5px;\n        background: center no-repeat;\n        background-size: contain;\n      }\n      .footer-tip {\n        font-size: 16px;\n        color: #9DA3B9;\n        .ant-btn {\n          height: 20px;\n        }\n        span {\n          color: #138CFF;\n          cursor: pointer;\n        }\n      }\n    }\n  }\n\n  .forget-password-container-mb {\n    margin-top: 1.867rem;\n    padding: 0 0.8rem;\n    width: 100%;\n    .send-email-container {\n      display: flex;\n      flex-direction: column;\n      .title {\n        font-size: 0.747rem;\n        font-weight: 600;\n        margin-bottom: 0.267rem;\n      }\n      .description {\n        margin-bottom: 1.333rem;\n        font-size: 0.4rem;\n        font-weight: 400;\n        line-height: 0.547rem;\n        color: #616577\n      }\n      .ant-form-item {\n        .ant-input {\n          width: 100%;\n          height: 1.227rem;\n          padding: 0 1.227rem;\n        }\n        .input-icon {\n          position: absolute;\n          width: 0.373rem;\n          height: 0.373rem;\n          top: 0.06rem;\n          left: 0.373rem;\n          z-index: 1;\n        }\n        .email-icon-normal {\n          background: url(\"../assets/user/email-normal.svg\") no-repeat;\n          background-size: 100% 100%;\n        }\n        .email-icon-click {\n          background: url(\"../assets/user/email-click.svg\") no-repeat;\n          background-size: 100% 100%;\n        }\n        .email-icon-error {\n          background: url(\"../assets/user/email-error.svg\") no-repeat;\n          background-size: 100% 100%;\n        }\n      }\n      .ant-form-explain {\n        margin-top: 0.133rem;\n        display: flex;\n        align-items: center;\n        &::before {\n          margin: 0 0.133rem 0 0;\n          background: url('../assets/user/error-tip-icon.svg') no-repeat center;\n          background-size: auto;\n          content: \"\";\n          display: inline-block;\n          width: 0.373rem;\n          height: 0.373rem;\n        }\n      }\n      .ant-form-item:nth-of-type(2) {\n        margin-top: 0.907rem;\n        .ant-form-item-children {\n          display: flex;\n          flex-direction: column;\n          .forget-password-form-button {\n            font-size: 0.48rem;\n            height: 1.227rem;\n            font-weight: 600;\n            margin-bottom: 0.187rem;\n            background-color: #3963EF;\n            border-color: #3963EF;\n            box-shadow: 0 0.04rem 0.08rem rgba(86, 109, 186, 0.3);\n            &:hover {\n              box-shadow: 0 0.08rem 0.187rem rgba(86, 109, 186, 0.3);\n            }\n            &:active {\n              background-color: #3257D2;\n              border-color: #3257D2;\n              box-shadow: 0 0.08rem 0.187rem rgba(86, 109, 186, 0.3);\n            }\n          }\n          .error-mss {\n            margin-top: 0.267rem;\n            opacity: 0;\n            font-size: 0.4rem;\n            line-height: 0.213rem;\n            font-weight: 400;\n            display: flex;\n            flex-direction: row;\n            align-items: center;\n            color: #FC6174;\n            &::before {\n              margin: 0 0.133rem 0 0;\n              background: url('../assets/user/error-tip-icon.svg') no-repeat center;\n              background-size: auto;\n              content: \"\";\n              display: inline-block;\n              width: 0.373rem;\n              height: 0.373rem;\n            }\n          }\n        }\n      }\n    }\n    .sent-container {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      .title {\n        font-size: 0.747rem;\n        line-height: 1.013rem;\n        font-weight: 600;\n        margin-bottom: 0.267rem;\n      }\n      .description {\n        margin-bottom: 1.216rem;\n        font-size: 0.4rem;\n        font-weight: 400;\n        line-height: 0.547rem;\n        color: #616577\n      }\n      .sent-icon {\n        width: 2.592rem;\n        display: inline-block;\n        height: 2.592rem;\n        margin-bottom: 1.167rem;\n        background: center no-repeat;\n        background-size: contain;\n      }\n      .footer-tip {\n        font-size: 0.4rem;\n        line-height: 0.547rem;\n        color: #9DA3B9;\n        .ant-btn {\n          height: 0.56rem;\n        }\n        span {\n          color: #138CFF;\n          cursor: pointer;\n        }\n      }\n    }\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ForgetPassword.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ForgetPassword.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ForgetPassword.vue?vue&type=template&id=0d71c647&\"\nimport script from \"./ForgetPassword.vue?vue&type=script&lang=js&\"\nexport * from \"./ForgetPassword.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ForgetPassword.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ForgetPassword.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ForgetPassword.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}