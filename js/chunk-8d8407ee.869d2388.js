(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8d8407ee"],{3846:function(i,t,e){e("9e1e")&&"g"!=/./g.flags&&e("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:e("0bfb")})},"6b54":function(i,t,e){"use strict";e("3846");var a=e("cb7c"),n=e("0bfb"),o=e("9e1e"),s="toString",c=/./[s],d=function(i){e("2aba")(RegExp.prototype,s,i,!0)};e("79e5")((function(){return"/a/b"!=c.call({source:"a",flags:"b"})}))?d((function(){var i=a(this);return"/".concat(i.source,"/","flags"in i?i.flags:!o&&i instanceof RegExp?n.call(i):void 0)})):c.name!=s&&d((function(){return c.call(this)}))},8668:function(i,t,e){},"8b26":function(i,t,e){"use strict";var a=e("8668"),n=e.n(a);n.a},a850:function(i,t,e){"use strict";e.r(t);var a=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"invoice-detail-container"},[e("div",{staticClass:"pay-success"},[e("div",{staticClass:"card-wrap"},[i._m(0),e("div",{staticClass:"card-detail"},[e("div",{staticClass:"package-list"},[e("div",{staticClass:"list-item"},[e("p",[i._v("訂單號")]),e("p",[i._v(i._s(i.invoiceInfo.invoiceid))])]),e("div",{staticClass:"list-item"},[e("p",[i._v("套餐")]),e("p",[i._v(i._s(i.invoiceInfo.description))])]),e("div",{staticClass:"list-item"},[e("p",[i._v("總額")]),e("p",[i._v(i._s(i.invoiceInfo.balance)+" USD")])]),e("div",{staticClass:"list-item"},[e("p",[i._v("付款方法")]),e("p",[i._v(i._s(i.paymentMethod))])]),e("div",{staticClass:"list-item"},[e("p",[i._v("訂購日期")]),e("p",[i._v(i._s(i.invoiceInfo.duedate))])]),e("div",{staticClass:"list-item"},[e("p",[i._v("訂單狀態")]),e("p",[i._v(i._s(i.invoiceInfo.status))])])])]),e("a-button",{attrs:{type:"primary",loading:i.loading,size:"large"},on:{click:i.backToInvoices}},[i._v("\n        "+i._s(i.statusTip)+"\n      ")])],1)])])},n=[function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"mb-header"},[e("p",[i._v("訂單詳情")])])}],o=(e("6b54"),e("ac6a"),e("7514"),e("7f7f"),e("4917"),e("9225")),s={name:"invoices-detail",data:function(){return{statusTip:"狀態更新中...",loading:!0,invoiceId:"",invoiceInfo:{invoiceid:"",description:"",balance:"",paymentMethod:"",duedate:"",status:"",paidDate:"",serviceId:"",datepaid:""},paymentMethod:"",payMethodList:[{id:0,name:"支付寶",logo:["alipay"],type:"payssionalipaycn"},{id:1,name:"信用卡",logo:["visa","master","unionpay","amex"],type:"stripe3dsecure"},{id:2,name:"PayPal",logo:["paypal"],type:"paypalcheckout"},{id:3,name:"加密貨幣",logo:["btc","btc2","eth","eth2"],type:"coinpayments"}],loopTimer:Object,inapp:!1,isSentData:!1,isAndroid:!1}},created:function(){var i=window.location.pathname.match(/invoices\/(.*)/);this.inapp="android"===localStorage.getItem("inapp"),this.isAndroid=!!(navigator.userAgent.toLowerCase().indexOf("android")>1),i&&i.length>1?(this.invoiceId=window.location.pathname.match(/invoices\/(.*)/)[1],this.loopTimer=setInterval(this.getData,4e3)):(this.loading=!1,this.statusTip="訂單未找到！")},methods:{getData:function(){var i=this;this.$request.getUsersInvoiceDetail(this.invoiceId,(function(t){t&&200===t.status?(i.invoiceInfo.invoiceid=t.data.invoiceid,i.invoiceInfo.description=t.data.items.item[0].description,i.invoiceInfo.balance=t.data.total,i.invoiceInfo.paymentMethod=t.data.paymentmethod,i.invoiceInfo.duedate=t.data.duedate,i.invoiceInfo.status=o["b"].t("Paid"===t.data.status?"Paid":"Unpaid"),i.invoiceInfo.paidDate=t.data.paidDate,i.invoiceInfo.serviceId=t.data.items.item[0].relid,i.invoiceInfo.datepaid=t.data.datepaid,i.paymentMethod=i.payMethodList.find((function(i){return i.type===t.data.paymentmethod})).name,"Paid"===t.data.status&&i.$http.get("".concat("https://fatpipe.work","/api/v1/services")).then((function(t){t&&200===t.status&&t.data.products.forEach((function(t,e){if(t.id===i.invoiceInfo.serviceId)if(window.clearInterval(i.loopTimer),i.loading=!1,i.statusTip="完成！",i.isSentData)i.isAndroid&&setTimeout((function(){var t=document.createElement("a");t.target="_blank",t.href="whaleblue://test.com?data=".concat(i.invoiceInfo.toString()),t.click()}),2e3);else if(i.isSentData=!0,i.inapp){var a={PID:t.productId||"00000",OID:i.invoiceInfo.invoiceid,INTERVAL:t.billingcycle||"no interval",PRICE:i.invoiceInfo.balance,CURRENCY:"USD",QUANTITY:1,DEVICES:2,BANDWIDTH:0,PLACE_ORDER_TIME:i.invoiceInfo.duedate,CHECKOUT_TIME:i.invoiceInfo.datepaid,CHECKOUT_OPTION:i.paymentMethod};i.firebaselogger.logEvent(i.firebaselogger.eventConfig.ECOMMERCE_PURCHASE,a)}else window.dataLayer.push({event:"purchase",OID:i.invoiceInfo.invoiceid,INTERVAL:t.billingcycle||"no interval",PRICE:i.invoiceInfo.balance,CURRENCY:"USD",QUANTITY:1,DEVICES:2,BANDWIDTH:0,PLACE_ORDER_TIME:i.invoiceInfo.duedate,CHECKOUT_TIME:i.invoiceInfo.datepaid,CHECKOUT_OPTION:i.paymentMethod})}))}))):(window.clearInterval(this.loopTimer),this.loading=!1,this.statusTip="訂單未找到！data && data.status === 200")}))},backToInvoices:function(){window.clearInterval(this.loopTimer),this.$router.push({path:"/my/invoices",name:"invoice"})}}},c=s,d=(e("8b26"),e("2877")),l=Object(d["a"])(c,a,n,!1,null,null,null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-8d8407ee.869d2388.js.map